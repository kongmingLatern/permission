import demoJSON from '@/modules/Admin/components/demo.json'
import { formatMenu } from '@/utils/helper/menu'

describe('return menu type', () => {
  it('should return menu dataSource', () => {
    const data = formatMenu(demoJSON)
    expect(data).toMatchInlineSnapshot(`
      [
        {
          "children": [],
          "key": "1465571524646932482",
          "label": "首页",
          "value": {
            "children": [],
            "componentPath": "/dashboard/Analysis",
            "createTime": "2021-11-30 14:40:55",
            "delFlag": false,
            "icon": "home",
            "id": "1465571524646932482",
            "menuType": "1",
            "name": "首页",
            "path": "/admin/dashboard/Analysis",
            "sort": 0,
          },
        },
        {
          "children": [
            {
              "children": [],
              "key": "1465864930711441410",
              "label": "操作权限",
              "value": {
                "children": [],
                "componentPath": "/system/Jurisdiction",
                "createTime": "2021-12-01 10:06:49",
                "delFlag": false,
                "id": "1465864930711441410",
                "menuType": "1",
                "name": "操作权限",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/Jurisdiction",
                "sort": 1,
              },
            },
            {
              "children": [],
              "key": "1465864296402653186",
              "label": "菜单管理",
              "value": {
                "children": [],
                "componentPath": "/system/PermissionList",
                "createTime": "2021-12-01 10:04:17",
                "delFlag": false,
                "id": "1465864296402653186",
                "menuType": "1",
                "name": "菜单管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/PermissionList",
                "sort": 2,
              },
            },
            {
              "children": [],
              "key": "1465864607443849218",
              "label": "角色管理",
              "value": {
                "children": [],
                "componentPath": "/system/RoleList",
                "createTime": "2021-12-01 10:05:32",
                "delFlag": false,
                "id": "1465864607443849218",
                "menuType": "1",
                "name": "角色管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/RoleList",
                "sort": 3,
              },
            },
            {
              "children": [],
              "key": "1465876341021872130",
              "label": "用户管理",
              "value": {
                "children": [],
                "componentPath": "/system/UserList",
                "createTime": "2021-12-01 10:52:09",
                "delFlag": false,
                "id": "1465876341021872130",
                "menuType": "1",
                "name": "用户管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/UserList",
                "sort": 4,
              },
            },
            {
              "children": [],
              "key": "1465877103697334274",
              "label": "角色组管理",
              "value": {
                "children": [],
                "componentPath": "/system/RoleGroupList",
                "createTime": "2021-12-01 10:55:11",
                "delFlag": false,
                "id": "1465877103697334274",
                "menuType": "1",
                "name": "角色组管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/RoleGroupList",
                "sort": 5,
              },
            },
            {
              "children": [],
              "key": "1467767576951132161",
              "label": "部门管理",
              "value": {
                "children": [],
                "componentPath": "/system/DepartList",
                "createTime": "2021-12-06 16:07:15",
                "delFlag": false,
                "id": "1467767576951132161",
                "menuType": "1",
                "name": "部门管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/DepartList",
                "sort": 8,
              },
            },
          ],
          "key": "1465863947700801538",
          "label": "系统管理",
          "value": {
            "children": [
              {
                "children": [],
                "componentPath": "/system/Jurisdiction",
                "createTime": "2021-12-01 10:06:49",
                "delFlag": false,
                "id": "1465864930711441410",
                "menuType": "1",
                "name": "操作权限",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/Jurisdiction",
                "sort": 1,
              },
              {
                "children": [],
                "componentPath": "/system/PermissionList",
                "createTime": "2021-12-01 10:04:17",
                "delFlag": false,
                "id": "1465864296402653186",
                "menuType": "1",
                "name": "菜单管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/PermissionList",
                "sort": 2,
              },
              {
                "children": [],
                "componentPath": "/system/RoleList",
                "createTime": "2021-12-01 10:05:32",
                "delFlag": false,
                "id": "1465864607443849218",
                "menuType": "1",
                "name": "角色管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/RoleList",
                "sort": 3,
              },
              {
                "children": [],
                "componentPath": "/system/UserList",
                "createTime": "2021-12-01 10:52:09",
                "delFlag": false,
                "id": "1465876341021872130",
                "menuType": "1",
                "name": "用户管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/UserList",
                "sort": 4,
              },
              {
                "children": [],
                "componentPath": "/system/RoleGroupList",
                "createTime": "2021-12-01 10:55:11",
                "delFlag": false,
                "id": "1465877103697334274",
                "menuType": "1",
                "name": "角色组管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/RoleGroupList",
                "sort": 5,
              },
              {
                "children": [],
                "componentPath": "/system/DepartList",
                "createTime": "2021-12-06 16:07:15",
                "delFlag": false,
                "id": "1467767576951132161",
                "menuType": "1",
                "name": "部门管理",
                "parentId": "1465863947700801538",
                "path": "/admin/layouts/RouteView/system/DepartList",
                "sort": 8,
              },
            ],
            "componentName": "/layouts/RouteView",
            "componentPath": "/layouts/RouteView",
            "createTime": "2021-12-01 10:02:54",
            "delFlag": false,
            "icon": "setting",
            "id": "1465863947700801538",
            "menuType": "0",
            "name": "系统管理",
            "path": "/admin/layouts/RouteView",
            "sort": 100,
          },
        },
      ]
    `)
  })
})